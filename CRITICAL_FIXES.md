# ğŸš¨ å…³é”®é—®é¢˜ä¿®å¤æ–¹æ¡ˆ

## é—®é¢˜æ±‡æ€»

1. âŒ **ä¼šè¯ç¬¬ä¸€æ¬¡å¯¹è¯ä¸¢å¤±** - localStorageä¿å­˜æ—¶æœº
2. âŒ **æ€ç»´é“¾ä¸æ˜¯é€æ¡æ˜¾ç¤º** - è½®è¯¢é€»è¾‘é—®é¢˜  
3. âŒ **ç”»å¸ƒä¸è‡ªåŠ¨å¼¹å‡º** + å¸Œæœ›è°ƒç”¨ç”Ÿæˆå™¨æ—¶å°±å¼¹å‡º
4. âŒ **Save/RunæŒ‰é’®æ— æ•ˆ** - æ²¡æœ‰æ­£ç¡®è¿æ¥
5. âŒ **åˆ é™¤404é”™è¯¯** - crew_idä¼ é€’é—®é¢˜

---

## æ ¹æœ¬åŸå› åˆ†æ

### é—®é¢˜2&3çš„æ ¹æºï¼šæ€ç»´é“¾è½®è¯¢æ¶æ„é—®é¢˜

**å½“å‰æµç¨‹**:
```
1. æ¸…ç©ºæ€ç»´é“¾å†å²
2. å¯åŠ¨è½®è¯¢ï¼ˆæ¯200msï¼‰â† æ­¤æ—¶åç«¯è¿˜æ²¡å¼€å§‹å¤„ç†ï¼
3. å‘é€æ¶ˆæ¯åˆ°åç«¯
4. åç«¯å¼€å§‹æ€è€ƒ + è®°å½•æ€ç»´é“¾
5. è½®è¯¢æ•è·åˆ°æ•°æ®
```

**é—®é¢˜**: 
- è½®è¯¢å¤ªæ—©å¯åŠ¨ï¼Œå‰å‡ æ¬¡è½®è¯¢éƒ½æ˜¯ç©ºçš„
- æ²¡æœ‰å®æ—¶æ£€æµ‹crewai_generatorå·¥å…·è¢«è°ƒç”¨
- ç”»å¸ƒå¼¹å‡ºä¾èµ–æœ€ç»ˆçš„metadataï¼Œå¤ªæ™šäº†

**æ­£ç¡®æµç¨‹åº”è¯¥æ˜¯**:
```
1. å‘é€æ¶ˆæ¯åˆ°åç«¯ï¼ˆä¸æ¸…ç©ºæ€ç»´é“¾ï¼‰
2. ç«‹å³å¯åŠ¨è½®è¯¢
3. è½®è¯¢æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ï¼š
   - å¦‚æœæ˜¯crewai_generator â†’ ç«‹å³æ‰“å¼€ç”»å¸ƒ
   - å®æ—¶æ›´æ–°æ€ç»´é“¾UI
4. ç»§ç»­è½®è¯¢ç›´åˆ°å®Œæˆ
```

---

## ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1: ç§»é™¤æ¸…ç©ºæ€ç»´é“¾çš„è°ƒç”¨

**åŸå› **: æ¯æ¬¡éƒ½æ¸…ç©ºä¼šå¯¼è‡´è½®è¯¢çœ‹ä¸åˆ°å†å²æ•°æ®ã€‚åº”è¯¥è®©åç«¯è‡ªåŠ¨è¦†ç›–ã€‚

```typescript
// åˆ é™¤è¿™è¡Œ:
await api.thinking.clearThinkingChain(requestSessionId)
```

### ä¿®å¤2: åœ¨è½®è¯¢ä¸­æ£€æµ‹crewai_generatorå¹¶æ‰“å¼€ç”»å¸ƒ

```typescript
if (chainData.success && chainData.thinking_chain.length > 0) {
  // æ£€æŸ¥æ˜¯å¦è°ƒç”¨äº†crewai_generator
  const hasCrewGenerator = chainData.thinking_chain.some(
    step => step.type === 'action' && step.tool === 'crewai_generator'
  )
  
  if (hasCrewGenerator && !crewDrawerOpen) {
    console.log("ğŸ¨ æ£€æµ‹åˆ°crewai_generatorè°ƒç”¨ï¼Œæ‰“å¼€ç”»å¸ƒ")
    setCrewDrawerOpen(true)
  }
  
  // è½¬æ¢æ€ç»´é“¾...
}
```

### ä¿®å¤3: Save/RunæŒ‰é’® - ä½¿ç”¨Canvaså†…éƒ¨çŠ¶æ€

**é—®é¢˜**: CrewCanvasçš„nodes/edgesçŠ¶æ€å’ŒCrewDrawerçš„çŠ¶æ€ä¸åŒæ­¥

**è§£å†³**: 
1. CrewCanvasä½¿ç”¨keyå¼ºåˆ¶é‡æ–°æŒ‚è½½
2. æˆ–è€…ä½¿ç”¨å—æ§ç»„ä»¶æ¨¡å¼

```typescript
<CrewCanvas
  key={selectedCrew?.id}  // â† å¼ºåˆ¶é‡æ–°æŒ‚è½½
  initialNodes={canvasNodes}
  initialEdges={canvasEdges}
  onSave={handleCanvasSave}
  onRun={handleRun}
/>
```

### ä¿®å¤4: åˆ é™¤404é”™è¯¯

**åŸå› **: å‰ç«¯ä¼ é€’çš„crew_idå¯èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦æˆ–æ ¼å¼ä¸å¯¹

**ä¸´æ—¶æ–¹æ¡ˆ**: æ·»åŠ è¯¦ç»†æ—¥å¿—
```typescript
console.log("ğŸ—‘ï¸ åˆ é™¤Crew:", crewId)
const result = await api.crewai.deleteCrew(crewId)
```

---

## å®æ–½ä¼˜å…ˆçº§

1. **P0 - ç«‹å³ä¿®å¤**: æ€ç»´é“¾è½®è¯¢é€»è¾‘ï¼ˆé—®é¢˜2&3ï¼‰
2. **P1 - é‡è¦**: Save/RunæŒ‰é’®ï¼ˆé—®é¢˜4ï¼‰
3. **P2 - æ¬¡è¦**: ç¬¬ä¸€æ¬¡ä¼šè¯ä¿å­˜ï¼ˆé—®é¢˜1ï¼‰
4. **P3 - è°ƒè¯•**: åˆ é™¤404ï¼ˆé—®é¢˜5ï¼‰

---

## æµ‹è¯•éªŒè¯

ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š

1. âœ… è¾“å…¥æ¶ˆæ¯åï¼Œæ€ç»´é“¾ç«‹å³å¼€å§‹æ˜¾ç¤ºï¼ˆä¸ç­‰AIå®Œæˆï¼‰
2. âœ… æ£€æµ‹åˆ°crewai_generatorè°ƒç”¨ï¼Œç”»å¸ƒç«‹å³æ‰“å¼€
3. âœ… Save/RunæŒ‰é’®ç‚¹å‡»æœ‰ååº”
4. âœ… åˆ é™¤ä¸æŠ¥404é”™è¯¯

---

**ç°åœ¨å¼€å§‹å®æ–½ä¿®å¤ï¼**


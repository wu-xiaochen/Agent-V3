# ğŸ§ª Sessionä¿å­˜éªŒè¯æµ‹è¯•

## æµ‹è¯•ç›®çš„
éªŒè¯é»˜è®¤sessionä¿å­˜åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ

---

## ğŸ”§ æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1: æ¸…ç©ºlocalStorage

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. è¿›å…¥ Application â†’ Local Storage â†’ `http://localhost:3000`
3. **å³é”® â†’ Clear** (æ¸…ç©ºæ‰€æœ‰æ•°æ®)
4. **åˆ·æ–°é¡µé¢** (Cmd+R æˆ– F5)

---

### æ­¥éª¤2: æ£€æŸ¥åˆå§‹åŒ–

**æ‰“å¼€Consoleæ ‡ç­¾ï¼ŒæŸ¥æ‰¾æ—¥å¿—**:

**é¢„æœŸçœ‹åˆ°**:
```
ğŸ’¾ [åˆå§‹åŒ–] åˆ›å»ºé»˜è®¤session: session-1
```

**æˆ–è€…**:
```
âœ… [åˆå§‹åŒ–] sessionå·²å­˜åœ¨: session-1
```

**éªŒè¯localStorage**:
1. å›åˆ° Application â†’ Local Storage
2. åº”è¯¥çœ‹åˆ° key: `session_session-1`
3. ç‚¹å‡»æŸ¥çœ‹ value:
```json
{
  "sessionId": "session-1",
  "messages": [],
  "timestamp": "2025-10-30T..."
}
```

âœ… **å¦‚æœçœ‹åˆ°ä¸Šè¿°å†…å®¹ï¼Œåˆå§‹åŒ–æˆåŠŸï¼**

---

### æ­¥éª¤3: æµ‹è¯•ç”¨æˆ·è¾“å…¥ä¿å­˜

1. **åœ¨è¾“å…¥æ¡†è¾“å…¥**: "ä½ å¥½"
2. **æŒ‰Enterå‘é€**
3. **ç«‹å³æŸ¥çœ‹Console**

**é¢„æœŸæ—¥å¿—**:
```
ğŸ’¾ğŸ’¾ğŸ’¾ [é‡è¦] ç”¨æˆ·è¾“å…¥åç«‹å³ä¿å­˜ä¼šè¯åˆ°localStorage: {
  sessionId: "session-1",
  messagesCount: 1,
  lastMessage: "ä½ å¥½"
}
```

**éªŒè¯localStorage**:
1. å›åˆ° Application â†’ Local Storage
2. åˆ·æ–° (ç‚¹å‡»åˆ·æ–°æŒ‰é’®)
3. ç‚¹å‡» `session_session-1`
4. åº”è¯¥çœ‹åˆ°:
```json
{
  "sessionId": "session-1",
  "messages": [
    {
      "id": "msg-...",
      "role": "user",
      "content": "ä½ å¥½",
      "timestamp": "..."
    }
  ],
  "timestamp": "..."
}
```

âœ… **å¦‚æœmessagesæ•°ç»„åŒ…å«"ä½ å¥½"ï¼Œä¿å­˜æˆåŠŸï¼**

---

### æ­¥éª¤4: æµ‹è¯•ä¼šè¯åˆ‡æ¢

1. **ä¸ç­‰AIå›å¤ï¼Œç«‹å³ç‚¹å‡»"New Chat"æŒ‰é’®**
2. **ç‚¹å‡»å›åˆ°ä¹‹å‰çš„session (session-1)**

**é¢„æœŸç»“æœ**:
- âœ… åº”è¯¥çœ‹åˆ°"ä½ å¥½"æ¶ˆæ¯è¿˜åœ¨
- âœ… æ¶ˆæ¯æ²¡æœ‰ä¸¢å¤±

---

## ğŸ› é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æ²¡æœ‰çœ‹åˆ°åˆå§‹åŒ–æ—¥å¿—

**æ£€æŸ¥**:
- Consoleæ˜¯å¦è¿‡æ»¤äº†æ—¥å¿—ï¼Ÿï¼ˆç¡®ä¿"Default levels"å…¨éƒ¨å‹¾é€‰ï¼‰
- æ˜¯å¦çœŸçš„åˆ·æ–°äº†é¡µé¢ï¼Ÿï¼ˆç¡¬åˆ·æ–°ï¼šCmd+Shift+Rï¼‰

**è§£å†³**:
- æ¸…ç©ºlocalStorageåç¡¬åˆ·æ–°
- æ£€æŸ¥frontend.log: `tail -f /Users/xiaochenwu/Desktop/Agent-V3/frontend.log`

---

### é—®é¢˜2: localStorageä¸­æ²¡æœ‰session_session-1

**æ£€æŸ¥**:
```javascript
// åœ¨Consoleä¸­æ‰§è¡Œ
localStorage.getItem('session_session-1')
```

**åº”è¯¥è¿”å›**:
```json
"{\"sessionId\":\"session-1\",\"messages\":[],\"timestamp\":\"...\"}"
```

**å¦‚æœè¿”å›null**:
1. æ£€æŸ¥Consoleæ˜¯å¦æœ‰JavaScripté”™è¯¯
2. æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„åŸŸå (localhost:3000)
3. å°è¯•æ‰‹åŠ¨æ‰§è¡Œ:
```javascript
localStorage.setItem('session_session-1', JSON.stringify({
  sessionId: 'session-1',
  messages: [],
  timestamp: new Date().toISOString()
}))
```

---

### é—®é¢˜3: ç”¨æˆ·è¾“å…¥åæ²¡æœ‰ä¿å­˜

**æ£€æŸ¥Consoleæ—¥å¿—**:
- æ˜¯å¦æœ‰ `ğŸ’¾ğŸ’¾ğŸ’¾ [é‡è¦] ç”¨æˆ·è¾“å…¥åç«‹å³ä¿å­˜ä¼šè¯` æ—¥å¿—ï¼Ÿ
  - **å¦**: handleSendæ²¡æœ‰æ‰§è¡Œåˆ°ä¿å­˜é€»è¾‘
  - **æ˜¯**: ç»§ç»­ä¸‹ä¸€æ­¥

**æ£€æŸ¥localStorage**:
```javascript
// åœ¨Consoleä¸­æ‰§è¡Œ
JSON.parse(localStorage.getItem('session_session-1'))
```

**åº”è¯¥çœ‹åˆ°messagesæ•°ç»„ä¸ä¸ºç©º**

---

## âœ… æˆåŠŸæ ‡å‡†

å…¨éƒ¨é€šè¿‡æ‰ç®—æˆåŠŸï¼š

- [ ] åˆå§‹åŒ–æ—¶åˆ›å»ºsession_session-1
- [ ] Consoleæœ‰åˆå§‹åŒ–æ—¥å¿—
- [ ] localStorageä¸­æœ‰sessionæ•°æ®
- [ ] ç”¨æˆ·è¾“å…¥åç«‹å³ä¿å­˜
- [ ] Consoleæœ‰ä¿å­˜æ—¥å¿—ï¼ˆğŸ’¾ğŸ’¾ğŸ’¾ï¼‰
- [ ] localStorageä¸­messagesæ›´æ–°
- [ ] åˆ‡æ¢ä¼šè¯åæ¶ˆæ¯ä¸ä¸¢å¤±

---

## ğŸ“Š æµ‹è¯•ç»“æœæ¨¡æ¿

```markdown
**æµ‹è¯•æ—¶é—´**: 2025-10-30 15:XX

**æ­¥éª¤1 (æ¸…ç©ºlocalStorage)**: âœ… å®Œæˆ

**æ­¥éª¤2 (åˆå§‹åŒ–æ£€æŸ¥)**:
- Consoleæ—¥å¿—: âœ… æœ‰ / âŒ æ— 
- localStorage: âœ… æœ‰session_session-1 / âŒ æ— 
- æˆªå›¾: [é™„ä¸Š]

**æ­¥éª¤3 (è¾“å…¥ä¿å­˜)**:
- Consoleæ—¥å¿—: âœ… æœ‰ğŸ’¾ğŸ’¾ğŸ’¾ / âŒ æ— 
- localStorageæ›´æ–°: âœ… æ˜¯ / âŒ å¦
- messagesæ•°ç»„: [ç²˜è´´å†…å®¹]

**æ­¥éª¤4 (åˆ‡æ¢ä¼šè¯)**:
- æ¶ˆæ¯ä¿ç•™: âœ… æ˜¯ / âŒ å¦

**æœ€ç»ˆç»“æœ**: âœ… å…¨éƒ¨é€šè¿‡ / âŒ éƒ¨åˆ†å¤±è´¥

**é—®é¢˜æè¿°**: ...
```

---

**ç°åœ¨å¼€å§‹æµ‹è¯•ï¼** ğŸš€

è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå¹¶æä¾›æµ‹è¯•ç»“æœã€‚


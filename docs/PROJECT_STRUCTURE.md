# Agent-V3 é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
Agent-V3/
â”œâ”€â”€ config/                          # é…ç½®æ–‡ä»¶ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ base/                        # åŸºç¡€é…ç½®
â”‚   â”‚   â”œâ”€â”€ agents.yaml             # æ™ºèƒ½ä½“é…ç½®
â”‚   â”‚   â”œâ”€â”€ prompts.yaml            # æç¤ºè¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ services.yaml           # æœåŠ¡é…ç½®ï¼ˆLLMã€Redisç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ logging.yaml            # æ—¥å¿—é…ç½®
â”‚   â”‚   â”œâ”€â”€ database.yaml           # æ•°æ®åº“é…ç½®
â”‚   â”‚   â””â”€â”€ README.md               # åŸºç¡€é…ç½®è¯´æ˜
â”‚   â”œâ”€â”€ environments/               # ç¯å¢ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ development.yaml        # å¼€å‘ç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ staging.yaml            # é¢„å‘ç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ production.yaml         # ç”Ÿäº§ç¯å¢ƒ
â”‚   â”‚   â””â”€â”€ README.md               # ç¯å¢ƒé…ç½®è¯´æ˜
â”‚   â”œâ”€â”€ examples/                   # é…ç½®ç¤ºä¾‹
â”‚   â”‚   â””â”€â”€ crewai_configs/         # CrewAIé…ç½®ç¤ºä¾‹
â”‚   â”œâ”€â”€ schemas/                    # é…ç½®Schema
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ tools/                      # å·¥å…·é…ç½®
â”‚       â”œâ”€â”€ tools_config.json       # ä¸»å·¥å…·é…ç½®
â”‚       â””â”€â”€ README.md               # å·¥å…·é…ç½®è¯´æ˜
â”‚
â”œâ”€â”€ src/                            # æºä»£ç ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ agents/                     # æ™ºèƒ½ä½“å±‚
â”‚   â”‚   â”œâ”€â”€ contracts/             # æ™ºèƒ½ä½“å¥‘çº¦/æ¥å£
â”‚   â”‚   â”œâ”€â”€ factories/             # æ™ºèƒ½ä½“å·¥å‚
â”‚   â”‚   â”œâ”€â”€ shared/                # å…±äº«ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ tools.py           # å·¥å…·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ dynamic_tool_loader.py  # åŠ¨æ€å·¥å…·åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ mcp_stdio_tool.py  # MCP Stdioå·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ api_tool.py        # APIå·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ output_formatter.py # è¾“å‡ºæ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ supply_chain/          # ä¾›åº”é“¾æ™ºèƒ½ä½“
â”‚   â”‚   â”‚   â””â”€â”€ supply_chain_agent.py
â”‚   â”‚   â””â”€â”€ unified/               # ç»Ÿä¸€æ™ºèƒ½ä½“
â”‚   â”‚       â””â”€â”€ unified_agent.py
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                    # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ config_loader.py
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                      # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ domain/                # é¢†åŸŸæ¨¡å‹
â”‚   â”‚   â””â”€â”€ services/              # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/            # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ llm/                  # LLMå·¥å‚
â”‚   â”‚   â”œâ”€â”€ cache/                # ç¼“å­˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ database/             # æ•°æ®åº“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ embedding/            # å‘é‡åµŒå…¥
â”‚   â”‚   â””â”€â”€ vector_store/         # å‘é‡å­˜å‚¨
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/                # æ¥å£é€‚é…å±‚
â”‚   â”‚   â”œâ”€â”€ api/                  # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ events/               # äº‹ä»¶å¤„ç†
â”‚   â”‚   â”œâ”€â”€ crewai_runtime.py     # CrewAIè¿è¡Œæ—¶
â”‚   â”‚   â””â”€â”€ crewai_config_template.py  # CrewAIé…ç½®æ¨¡æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ prompts/                   # æç¤ºè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ prompt_loader.py      # æç¤ºè¯åŠ è½½å™¨
â”‚   â”‚   â”œâ”€â”€ prompts.py            # æç¤ºè¯å®šä¹‰
â”‚   â”‚   â””â”€â”€ supply_chain_prompts.py  # ä¾›åº”é“¾æç¤ºè¯
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                    # å…±äº«ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ exceptions/           # å¼‚å¸¸å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ types/                # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ debug_filter.py       # è°ƒè¯•è¿‡æ»¤å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/                   # å­˜å‚¨å±‚
â”‚   â”‚   â””â”€â”€ redis_chat_history.py # Redisè®°å¿†å­˜å‚¨
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                     # ä¸“ä¸šå·¥å…·
â”‚   â”‚   â”œâ”€â”€ supply_chain_tools.py # ä¾›åº”é“¾å·¥å…·
â”‚   â”‚   â”œâ”€â”€ crewai_generator.py   # CrewAIç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ crewai_runtime_tool.py # CrewAIè¿è¡Œå·¥å…·
â”‚   â”‚   â””â”€â”€ crewai_config_validator.py  # é…ç½®éªŒè¯
â”‚   â”‚
â”‚   â””â”€â”€ utils/                     # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ check_services_config.py
â”‚       â”œâ”€â”€ debug_config.py
â”‚       â””â”€â”€ debug_tools.py
â”‚
â”œâ”€â”€ tests/                         # æµ‹è¯•å¥—ä»¶ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ comprehensive/            # ç»¼åˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_agent_core_functionality.py  # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_system_integration.py        # ç³»ç»Ÿé›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ integration/              # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_n8n_mcp_integration.py
â”‚   â”‚   â””â”€â”€ test_supply_chain_comprehensive.py
â”‚   â”œâ”€â”€ supply_chain/             # ä¾›åº”é“¾æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_supply_chain_workflow.py
â”‚   â”œâ”€â”€ unit/                     # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ test_*.py
â”‚   â”œâ”€â”€ config/                   # é…ç½®æµ‹è¯•
â”‚   â”œâ”€â”€ tools/                    # å·¥å…·æµ‹è¯•
â”‚   â”œâ”€â”€ agents/                   # æ™ºèƒ½ä½“æµ‹è¯•
â”‚   â””â”€â”€ test_all.py              # æµ‹è¯•è¿è¡Œå™¨
â”‚
â”œâ”€â”€ docs/                         # æ–‡æ¡£ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ api/                      # APIæ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ api_reference.md
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ deployment/               # éƒ¨ç½²æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ deployment_guide.md
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ development/              # å¼€å‘æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ project_rules.md     # é¡¹ç›®è§„åˆ™
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md           # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICKSTART.md            # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ TESTING.md               # æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md     # é¡¹ç›®ç»“æ„ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚   â””â”€â”€ README.md                # æ–‡æ¡£ç´¢å¼•
â”‚
â”œâ”€â”€ examples/                     # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ example_unified_agent.py      # ç»Ÿä¸€æ™ºèƒ½ä½“ç¤ºä¾‹
â”‚   â”œâ”€â”€ example_supply_chain_agent.py # ä¾›åº”é“¾æ™ºèƒ½ä½“ç¤ºä¾‹
â”‚   â””â”€â”€ example_crewai_usage.py       # CrewAIä½¿ç”¨ç¤ºä¾‹
â”‚
â”œâ”€â”€ scripts/                      # è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ setup/                    # å®‰è£…è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ quick_start.sh
â”‚   â”‚   â”œâ”€â”€ quick_start.bat
â”‚   â”‚   â”œâ”€â”€ start.sh
â”‚   â”‚   â”œâ”€â”€ start.bat
â”‚   â”‚   â””â”€â”€ setup_postgresql.sh
â”‚   â”œâ”€â”€ deployment/               # éƒ¨ç½²è„šæœ¬
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ maintenance/              # ç»´æŠ¤è„šæœ¬
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ monitoring/               # ç›‘æ§è„šæœ¬
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ requirements/                 # ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ base.yaml                # åŸºç¡€ä¾èµ–
â”‚   â”œâ”€â”€ development.yaml         # å¼€å‘ä¾èµ–
â”‚   â”œâ”€â”€ production.yaml          # ç”Ÿäº§ä¾èµ–
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ logs/                         # æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ agent.log
â”‚
â”œâ”€â”€ .github/                      # GitHubé…ç½®
â”‚   â””â”€â”€ workflows/               # CI/CDå·¥ä½œæµ
â”‚
â”œâ”€â”€ main.py                       # ç¨‹åºå…¥å£
â”œâ”€â”€ verify_project.py            # é¡¹ç›®éªŒè¯è„šæœ¬
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–
â”œâ”€â”€ README.md                    # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ PROJECT_SUMMARY.md           # é¡¹ç›®æ€»ç»“
â”œâ”€â”€ CONTRIBUTING.md              # è´¡çŒ®æŒ‡å—
â”œâ”€â”€ docker-compose.yml           # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile                   # Dockeré•œåƒ
â””â”€â”€ pyproject.toml              # Pythoné¡¹ç›®é…ç½®
```

## ğŸ¯ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. é…ç½®ç³»ç»Ÿ (`config/`)
- **ç”¨é€”**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰é…ç½®ï¼Œæ”¯æŒå¤šç¯å¢ƒ
- **ç‰¹ç‚¹**ï¼šåˆ†å±‚é…ç½®ã€ç¯å¢ƒå˜é‡æ”¯æŒã€çƒ­æ›´æ–°
- **å…³é”®æ–‡ä»¶**ï¼š
  - `agents.yaml` - æ™ºèƒ½ä½“é…ç½®
  - `prompts.yaml` - æç¤ºè¯é…ç½®
  - `services.yaml` - æœåŠ¡é…ç½®
  - `tools_config.json` - å·¥å…·é…ç½®

### 2. æ™ºèƒ½ä½“å±‚ (`src/agents/`)
- **ç”¨é€”**ï¼šæ™ºèƒ½ä½“å®ç°å’Œç®¡ç†
- **æ¶æ„**ï¼š
  - `unified/` - é€šç”¨æ™ºèƒ½ä½“
  - `supply_chain/` - ä¾›åº”é“¾ä¸“ä¸šæ™ºèƒ½ä½“
  - `shared/` - å…±äº«ç»„ä»¶ï¼ˆå·¥å…·ã€æ ¼å¼åŒ–ç­‰ï¼‰
- **è®¾è®¡æ¨¡å¼**ï¼šå·¥å‚æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼

### 3. åŸºç¡€è®¾æ–½å±‚ (`src/infrastructure/`)
- **ç”¨é€”**ï¼šæä¾›åº•å±‚æœåŠ¡æ”¯æŒ
- **åŒ…å«**ï¼š
  - LLMå·¥å‚ - å¤šæä¾›å•†æ”¯æŒ
  - ç¼“å­˜æœåŠ¡ - Redisé›†æˆ
  - å‘é‡å­˜å‚¨ - çŸ¥è¯†åº“æ”¯æŒ

### 4. å­˜å‚¨å±‚ (`src/storage/`)
- **ç”¨é€”**ï¼šæ•°æ®æŒä¹…åŒ–
- **æ ¸å¿ƒ**ï¼šRediså¯¹è¯å†å²å­˜å‚¨
- **ç‰¹ç‚¹**ï¼šä¼šè¯ç®¡ç†ã€TTLæ”¯æŒã€åˆ†å¸ƒå¼

### 5. å·¥å…·ç³»ç»Ÿ (`src/tools/` + `src/agents/shared/`)
- **ç”¨é€”**ï¼šä¸“ä¸šå·¥å…·å’Œå·¥å…·ç®¡ç†
- **ç±»å‹**ï¼š
  - å†…ç½®å·¥å…·ï¼ˆæ—¶é—´ã€è®¡ç®—å™¨ã€æœç´¢ï¼‰
  - ä¾›åº”é“¾å·¥å…·ï¼ˆåˆ†æã€é¢„æµ‹ã€ä¼˜åŒ–ï¼‰
  - é›†æˆå·¥å…·ï¼ˆCrewAIã€n8nï¼‰
- **ç‰¹ç‚¹**ï¼šåŠ¨æ€åŠ è½½ã€é…ç½®é©±åŠ¨

### 6. æµ‹è¯•ç³»ç»Ÿ (`tests/`)
- **è¦†ç›–**ï¼šå•å…ƒã€é›†æˆã€ç«¯åˆ°ç«¯
- **ç»„ç»‡**ï¼š
  - `comprehensive/` - å®Œæ•´åŠŸèƒ½æµ‹è¯•
  - `integration/` - é›†æˆæµ‹è¯•
  - `unit/` - å•å…ƒæµ‹è¯•
- **å·¥å…·**ï¼špytestã€pytest-asyncio

### 7. æ–‡æ¡£ç³»ç»Ÿ (`docs/`)
- **ç»“æ„**ï¼š
  - å¿«é€Ÿå¼€å§‹ - QUICKSTART.md
  - æ¶æ„è®¾è®¡ - ARCHITECTURE.md
  - æµ‹è¯•æŒ‡å— - TESTING.md
  - APIå‚è€ƒ - api/
  - éƒ¨ç½²æŒ‡å— - deployment/

## ğŸ“Š æ–‡ä»¶å‘½åè§„èŒƒ

### Pythonæ–‡ä»¶
- æ¨¡å—æ–‡ä»¶ï¼š`å°å†™_ä¸‹åˆ’çº¿.py`
- ç±»æ–‡ä»¶ï¼š`PascalCase.py` (å¦‚ `UnifiedAgent`)
- æµ‹è¯•æ–‡ä»¶ï¼š`test_*.py`

### é…ç½®æ–‡ä»¶
- YAMLé…ç½®ï¼š`å°å†™.yaml`
- JSONé…ç½®ï¼š`å°å†™_ä¸‹åˆ’çº¿.json`
- ç¯å¢ƒé…ç½®ï¼š`ç¯å¢ƒå.yaml`

### æ–‡æ¡£æ–‡ä»¶
- Markdownï¼š`UPPERCASE.md` æˆ– `å°å†™_ä¸‹åˆ’çº¿.md`
- ä¸»æ–‡æ¡£ï¼šå¤§å†™ï¼ˆå¦‚ `README.md`ï¼‰
- å­æ–‡æ¡£ï¼šå°å†™ä¸‹åˆ’çº¿ï¼ˆå¦‚ `api_reference.md`ï¼‰

## ğŸ”„ æ•°æ®æµå‘

```
ç”¨æˆ·è¾“å…¥
   â†“
main.py (å…¥å£)
   â†“
UnifiedAgent/SupplyChainAgent (æ™ºèƒ½ä½“å±‚)
   â†“
â”œâ”€â†’ Config Loader (é…ç½®)
â”œâ”€â†’ LLM Factory (LLMæœåŠ¡)
â”œâ”€â†’ Tool System (å·¥å…·è°ƒç”¨)
â”œâ”€â†’ Redis Storage (è®°å¿†å­˜å‚¨)
â””â”€â†’ Output Formatter (æ ¼å¼åŒ–)
   â†“
ç”¨æˆ·è¾“å‡º
```

## ğŸ¨ è®¾è®¡åŸåˆ™

1. **åˆ†å±‚æ¶æ„**ï¼šæ¸…æ™°çš„å±‚æ¬¡åˆ’åˆ†
2. **é…ç½®é©±åŠ¨**ï¼šé¿å…ç¡¬ç¼–ç 
3. **ä¾èµ–æ³¨å…¥**ï¼šè§£è€¦ç»„ä»¶
4. **æ¥å£éš”ç¦»**ï¼šå•ä¸€èŒè´£
5. **æµ‹è¯•ä¼˜å…ˆ**ï¼šé«˜æµ‹è¯•è¦†ç›–
6. **æ–‡æ¡£å®Œæ•´**ï¼šæ¯å±‚éƒ½æœ‰æ–‡æ¡£

## ğŸš€ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°æ™ºèƒ½ä½“
1. åœ¨ `src/agents/` åˆ›å»ºæ–°ç›®å½•
2. å®ç°æ™ºèƒ½ä½“ç±»
3. åœ¨ `config/base/agents.yaml` æ·»åŠ é…ç½®
4. åœ¨ `config/base/prompts.yaml` æ·»åŠ æç¤ºè¯
5. ç¼–å†™æµ‹è¯•ç”¨ä¾‹

### æ·»åŠ æ–°å·¥å…·
1. åœ¨ `src/tools/` åˆ›å»ºå·¥å…·ç±»
2. åœ¨ `src/agents/shared/tools.py` æ³¨å†Œ
3. åœ¨ `config/tools/tools_config.json` é…ç½®
4. ç¼–å†™æµ‹è¯•ç”¨ä¾‹

### æ·»åŠ æ–°é…ç½®
1. åœ¨ `config/base/` æ·»åŠ YAMLæ–‡ä»¶
2. åœ¨ `config_loader.py` æ·»åŠ åŠ è½½æ–¹æ³•
3. æ›´æ–°æ–‡æ¡£

## ğŸ“ ç»´æŠ¤å»ºè®®

1. **å®šæœŸæ›´æ–°ä¾èµ–**ï¼š`pip list --outdated`
2. **è¿è¡Œæµ‹è¯•**ï¼š`pytest tests/`
3. **æ£€æŸ¥è¦†ç›–ç‡**ï¼š`pytest --cov=src`
4. **éªŒè¯é¡¹ç›®**ï¼š`python verify_project.py`
5. **æ›´æ–°æ–‡æ¡£**ï¼šä¿æŒæ–‡æ¡£åŒæ­¥

## ğŸ” æŸ¥æ‰¾æ–‡ä»¶

- **æ™ºèƒ½ä½“ç›¸å…³**ï¼š`src/agents/`
- **é…ç½®ç›¸å…³**ï¼š`config/`
- **æµ‹è¯•ç›¸å…³**ï¼š`tests/`
- **æ–‡æ¡£ç›¸å…³**ï¼š`docs/`
- **å·¥å…·ç›¸å…³**ï¼š`src/tools/` å’Œ `src/agents/shared/`

---

**ä¿æŒé¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œä»£ç ç»„ç»‡æœ‰åºï¼**


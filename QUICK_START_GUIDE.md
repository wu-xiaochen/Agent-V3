# Agent-V3 å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd /Users/xiaochenwu/Desktop/Agent-V3

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pip install -r requirements.txt

# å¯åŠ¨APIæœåŠ¡å™¨
python api_server.py
```

**éªŒè¯**: è®¿é—® http://localhost:8000 åº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "name": "Agent-V3 API",
  "version": "3.1.0",
  "status": "running"
}
```

### 2. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd /Users/xiaochenwu/Desktop/Agent-V3/frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pnpm install

# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
cp .env.example .env.local

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

**éªŒè¯**: è®¿é—® http://localhost:3000 åº”è¯¥çœ‹åˆ°èŠå¤©ç•Œé¢

### 3. æˆ–è€…ä½¿ç”¨ä¸€é”®å¯åŠ¨è„šæœ¬

```bash
cd /Users/xiaochenwu/Desktop/Agent-V3

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./start_all.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡
./stop_all.sh
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

### åŠŸèƒ½ 1: åŸºç¡€å¯¹è¯

1. æ‰“å¼€ http://localhost:3000
2. ç‚¹å‡» "New Chat" åˆ›å»ºæ–°ä¼šè¯
3. è¾“å…¥: "ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹è‡ªå·±"
4. è§‚å¯Ÿ:
   - âœ… ä¼šè¯åç§°è‡ªåŠ¨æ›´æ–°ä¸º "ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹è‡ªå·±"
   - âœ… AIå›å¤æ˜¾ç¤ºåœ¨èŠå¤©åŒºåŸŸ
   - âœ… æ¶ˆæ¯æ°”æ³¡é«˜åº¦ä¸€è‡´

### åŠŸèƒ½ 2: ä¼šè¯åç§°ç¼–è¾‘

1. hoverä»»æ„ä¼šè¯é¡¹
2. ç‚¹å‡»å³ä¾§çš„ç¼–è¾‘å›¾æ ‡ï¼ˆé“…ç¬”ï¼‰
3. ä¿®æ”¹æ ‡é¢˜ï¼ŒæŒ‰ Enter ä¿å­˜
4. è§‚å¯Ÿ:
   - âœ… æ ‡é¢˜ç«‹å³æ›´æ–°
   - âœ… ä¼šè¯åˆ—è¡¨åˆ·æ–°

### åŠŸèƒ½ 3: å·¥å…·è°ƒç”¨çŠ¶æ€

1. è¾“å…¥: "ç”¨CrewAIåˆ†ææ‰‹æœºå¸‚åœºè¶‹åŠ¿"
2. è§‚å¯ŸèŠå¤©åŒºåŸŸ:
   - âœ… æ˜¾ç¤º "AIæ­£åœ¨æ€è€ƒ..." å¡ç‰‡
   - âœ… æ˜¾ç¤ºå·¥å…·è°ƒç”¨è¯¦æƒ…
   - âœ… å¯ä»¥æŠ˜å /å±•å¼€

### åŠŸèƒ½ 4: å·¥å…·è°ƒç”¨å†å²

1. ç‚¹å‡»å³ä¸Šè§’èœå•å›¾æ ‡
2. åˆ‡æ¢åˆ° "Tools" æ ‡ç­¾é¡µ
3. æ»šåŠ¨åˆ°åº•éƒ¨
4. è§‚å¯Ÿ:
   - âœ… "å·¥å…·è°ƒç”¨å†å²" å¡ç‰‡
   - âœ… ç‚¹å‡»å±•å¼€æŸ¥çœ‹è¯¦æƒ…

### åŠŸèƒ½ 5: åˆ é™¤ä¼šè¯

1. hoverä»»æ„ä¼šè¯
2. ç‚¹å‡»å³ä¾§åƒåœ¾æ¡¶å›¾æ ‡
3. ç¡®è®¤åˆ é™¤
4. è§‚å¯Ÿ:
   - âœ… ä¼šè¯ä»åˆ—è¡¨æ¶ˆå¤±
   - âœ… å¦‚æœåˆ é™¤çš„æ˜¯å½“å‰ä¼šè¯ï¼Œè‡ªåŠ¨åˆ›å»ºæ–°ä¼šè¯

---

## ğŸ“Š APIç«¯ç‚¹é€ŸæŸ¥

### V1 APIï¼ˆä¼ ç»Ÿï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/chat/message` | POST | å‘é€æ¶ˆæ¯ |
| `/api/chat/sessions` | GET | è·å–ä¼šè¯åˆ—è¡¨ |
| `/api/chat/sessions/{id}` | DELETE | åˆ é™¤ä¼šè¯ |
| `/api/files/upload` | POST | ä¸Šä¼ æ–‡ä»¶ |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ |

### V2 APIï¼ˆå¢å¼ºï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/v2/chat/stream` | POST | æµå¼èŠå¤© (SSE) |
| `/api/v2/chat/sessions/{id}/update` | POST | æ›´æ–°ä¼šè¯ |
| `/api/v2/tools/stats` | GET | å·¥å…·ç»Ÿè®¡ |

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**ç—‡çŠ¶**: "æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨"

**è§£å†³**:
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:8000/api/health

# 2. æ£€æŸ¥å‰ç«¯ç¯å¢ƒå˜é‡
cat frontend/.env.local
# ç¡®ä¿ NEXT_PUBLIC_API_URL=http://localhost:8000

# 3. é‡å¯å‰ç«¯
cd frontend
rm -rf .next
pnpm dev
```

### Q2: å·¥å…·è°ƒç”¨ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: å‘é€æ¶ˆæ¯åæ²¡æœ‰å·¥å…·è°ƒç”¨å¡ç‰‡

**è§£å†³**:
- ç¡®ä¿æ¶ˆæ¯åŒ…å« "CREW" æˆ– "CrewAI" å…³é”®è¯
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- æ£€æŸ¥åç«¯æ—¥å¿—è¾“å‡º

### Q3: ä¼šè¯æ ‡é¢˜ç¼–è¾‘å¤±è´¥

**ç—‡çŠ¶**: ç‚¹å‡»ä¿å­˜åæ ‡é¢˜æœªæ›´æ–°

**è§£å†³**:
```bash
# æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°
# åº”è¯¥çœ‹åˆ°: "ğŸ’¾ Saving session title: ..."
# å’Œ: "âœ… Session title saved"

# å¦‚æœçœ‹åˆ°é”™è¯¯ï¼Œæ£€æŸ¥APIæ˜¯å¦å¯ç”¨
curl -X POST http://localhost:8000/api/v2/chat/sessions/test/update \
  -H "Content-Type: application/json" \
  -d '{"title": "æµ‹è¯•"}'
```

### Q4: ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**: "Address already in use"

**è§£å†³**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:8000  # åç«¯
lsof -ti:3000  # å‰ç«¯

# æ€æ­»è¿›ç¨‹
kill -9 $(lsof -ti:8000)
kill -9 $(lsof -ti:3000)
```

---

## ğŸ¨ UIç»„ä»¶ä½ç½®

```
ä¸»ç•Œé¢
â”œâ”€â”€ ä¾§è¾¹æ  (Sidebar)
â”‚   â”œâ”€â”€ New Chat æŒ‰é’®
â”‚   â”œâ”€â”€ ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ ä¼šè¯æ ‡é¢˜ (å¯ç¼–è¾‘)
â”‚   â”‚   â””â”€â”€ åˆ é™¤æŒ‰é’® (hoveræ˜¾ç¤º)
â”‚   â”œâ”€â”€ Quick Access
â”‚   â”‚   â”œâ”€â”€ Knowledge Bases
â”‚   â”‚   â””â”€â”€ CrewAI Teams
â”‚   â””â”€â”€ Settings
â”‚
â”œâ”€â”€ èŠå¤©åŒºåŸŸ (ChatInterface)
â”‚   â”œâ”€â”€ æ¶ˆæ¯åˆ—è¡¨
â”‚   â”œâ”€â”€ å·¥å…·è°ƒç”¨çŠ¶æ€å¡ç‰‡
â”‚   â””â”€â”€ è¾“å…¥æ¡†
â”‚
â””â”€â”€ å·¥å…·é¢æ¿ (ToolPanel) - å³ä¾§æ»‘å‡º
    â”œâ”€â”€ CrewAI æ ‡ç­¾
    â”œâ”€â”€ N8N æ ‡ç­¾
    â”œâ”€â”€ Knowledge æ ‡ç­¾
    â”œâ”€â”€ Tools æ ‡ç­¾
    â”‚   â”œâ”€â”€ å·¥å…·é…ç½®
    â”‚   â””â”€â”€ å·¥å…·è°ƒç”¨å†å² â­
    â””â”€â”€ Settings æ ‡ç­¾
```

---

## ğŸ“ å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Enter` | å‘é€æ¶ˆæ¯ï¼ˆèŠå¤©è¾“å…¥æ¡†ï¼‰ |
| `Shift + Enter` | æ¢è¡Œ |
| `Enter` | ä¿å­˜ï¼ˆç¼–è¾‘ä¼šè¯æ ‡é¢˜ï¼‰ |
| `Esc` | å–æ¶ˆï¼ˆç¼–è¾‘ä¼šè¯æ ‡é¢˜ï¼‰ |
| `Cmd/Ctrl + R` | åˆ·æ–°é¡µé¢ |
| `F12` | æ‰“å¼€å¼€å‘è€…å·¥å…· |

---

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹ Console æ ‡ç­¾ï¼š

```javascript
// åº”è¯¥çœ‹åˆ°è¯¦ç»†æ—¥å¿—
ğŸ”„ Sidebar Render - currentSession: session-xxx
âœ¨ Creating new session: session-xxx
ğŸš€ Sending message: {...}
ğŸ“¥ Response received: {...}
ğŸ“ Auto-generating session title: "..."
```

### 2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚

å¼€å‘è€…å·¥å…· â†’ Network æ ‡ç­¾ï¼š

```
Name                    Status  Type        Size
api/chat/message        200     xhr         1.2kb
api/chat/sessions       200     xhr         0.5kb
```

### 3. æ£€æŸ¥åç«¯æ—¥å¿—

```bash
# åç«¯ç»ˆç«¯åº”è¯¥æ˜¾ç¤º
ğŸš€ Agent-V3 API æœåŠ¡å¯åŠ¨ä¸­...
âœ… æ–‡ä»¶ç®¡ç†å™¨å·²åˆå§‹åŒ–
âœ… å·¥å…·æ³¨å†Œå™¨å·²åˆå§‹åŒ–
âœ… Agent-V3 API æœåŠ¡å·²å¯åŠ¨
INFO:     Uvicorn running on http://0.0.0.0:8000

# æ”¶åˆ°è¯·æ±‚æ—¶
ğŸ’¬ å¤„ç†æ¶ˆæ¯: ä½ å¥½...
â±ï¸  æ‰§è¡Œæ—¶é—´: 1.23s
```

---

## ğŸ“š è¿›ä¸€æ­¥å­¦ä¹ 

### è¯¦ç»†æ–‡æ¡£

- `README.md` - é¡¹ç›®æ€»è§ˆ
- `FINAL_UI_IMPROVEMENTS.md` - UIæ”¹è¿›è¯¦æƒ…
- `COMPLETE_OPTIMIZATION_SUMMARY.md` - ä¼˜åŒ–æ€»ç»“
- `FRONTEND_TEST_GUIDE.md` - å®Œæ•´æµ‹è¯•æŒ‡å—

### APIæ–‡æ¡£

è®¿é—® http://localhost:8000/docs æŸ¥çœ‹äº¤äº’å¼APIæ–‡æ¡£

### ç¤ºä¾‹ä»£ç 

```python
# åç«¯ç¤ºä¾‹: ä½¿ç”¨ UnifiedAgent
from src.agents.unified.unified_agent import UnifiedAgent

agent = UnifiedAgent(
    provider="siliconflow",
    memory=True,
    session_id="test-session"
)

response = agent.run("ä½ å¥½")
print(response)
```

```typescript
// å‰ç«¯ç¤ºä¾‹: è°ƒç”¨èŠå¤©API
import { api } from '@/lib/api'

const response = await api.chat.sendMessage(
  "session-123",
  "ä½ å¥½",
  { provider: "siliconflow", memory: true }
)

console.log(response.response)
```

---

## âœ… éªŒæ”¶æ¸…å•

ä½¿ç”¨æœ¬æŒ‡å—å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š

- [ ] æˆåŠŸå¯åŠ¨åç«¯æœåŠ¡
- [ ] æˆåŠŸå¯åŠ¨å‰ç«¯æœåŠ¡
- [ ] åˆ›å»ºæ–°ä¼šè¯
- [ ] å‘é€æ¶ˆæ¯å¹¶æ”¶åˆ°å›å¤
- [ ] ç¼–è¾‘ä¼šè¯æ ‡é¢˜
- [ ] æŸ¥çœ‹å·¥å…·è°ƒç”¨çŠ¶æ€
- [ ] æŸ¥çœ‹å·¥å…·è°ƒç”¨å†å²
- [ ] åˆ é™¤ä¼šè¯
- [ ] æŸ¥çœ‹APIæ–‡æ¡£

**å¦‚æœå…¨éƒ¨å®Œæˆï¼Œæ­å–œï¼ä½ å·²ç»æŒæ¡äº† Agent-V3 çš„åŸºæœ¬ä½¿ç”¨ï¼** ğŸ‰

---

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼š

1. æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
2. æ£€æŸ¥æµè§ˆå™¨å’Œåç«¯æ—¥å¿—
3. æŸ¥çœ‹ GitHub Issues
4. å‚è€ƒæµ‹è¯•æŒ‡å—

**å¿«é€Ÿå¼€å§‹æŒ‡å—æ›´æ–°æ—¶é—´**: 2025-10-29

